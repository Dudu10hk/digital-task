# ✅ רשימת משימות להטמעת מערכת ניהול משתמשים

## שלב 1: הכנה והגדרה (חובה)

### ב-Supabase Dashboard

- [ ] היכנס ל-Supabase Dashboard
- [ ] לחץ על SQL Editor
- [ ] בחר את הסקריפט המתאים:
  - [ ] **התקנה ראשונה:** הרץ `scripts/001_create_tables.sql`
  - [ ] **טבלה קיימת:** הרץ `scripts/007_add_password_column.sql`
- [ ] הרץ `scripts/008_users_rls_policies.sql`
- [ ] ודא שאין שגיאות

### ודא טבלת users

- [ ] פתח Table Editor ב-Supabase
- [ ] מצא את טבלת `users`
- [ ] ודא שיש את העמודות:
  - [ ] `id` (TEXT)
  - [ ] `name` (TEXT)
  - [ ] `email` (TEXT)
  - [ ] `password` (TEXT)
  - [ ] `avatar` (TEXT, nullable)
  - [ ] `role` (TEXT)
  - [ ] `created_at` (TIMESTAMPTZ)
  - [ ] `updated_at` (TIMESTAMPTZ)

---

## שלב 2: בדיקת הקוד

### בדיקות אוטומטיות

- [ ] הרץ: `./test-user-management.sh`
- [ ] ודא שכל הבדיקות ירוקות ✅
- [ ] אם יש שגיאות - תקן לפי ההוראות

### בנייה

- [ ] הרץ: `npm install`
- [ ] הרץ: `npm run build`
- [ ] ודא שאין שגיאות TypeScript
- [ ] ודא שהבנייה הצליחה

---

## שלב 3: בדיקה ידנית

### בדיקת הוספת משתמש

- [ ] הפעל את האפליקציה: `npm run dev`
- [ ] התחבר כמנהל מערכת
- [ ] לחץ על "ניהול משתמשים"
- [ ] נסה להוסיף משתמש חדש:
  - [ ] שם: "משתמש בדיקה"
  - [ ] אימייל: `test@example.com`
  - [ ] סיסמה: (השאר ריק)
  - [ ] הרשאות: user
- [ ] לחץ "הוסף משתמש"
- [ ] ודא שרואה הודעה עם:
  - [ ] אימייל: test@example.com
  - [ ] סיסמה: משתמש123
- [ ] **שים לב:** ההודעה מוצגת 15 שניות - העתק את הפרטים!

### בדיקת שמירה ב-Supabase

- [ ] פתח Supabase Table Editor
- [ ] מצא את טבלת `users`
- [ ] ודא שהמשתמש החדש מופיע
- [ ] בדוק שכל השדות נשמרו:
  - [ ] שם: "משתמש בדיקה"
  - [ ] אימייל: test@example.com
  - [ ] סיסמה: משתמש123
  - [ ] role: user

### בדיקת כניסה

- [ ] התנתק מהמערכת
- [ ] נסה להתחבר עם המשתמש החדש:
  - [ ] אימייל: test@example.com
  - [ ] סיסמה: משתמש123
- [ ] ודא שההתחברות הצליחה ✅
- [ ] ודא שאתה רואה את המערכת בהרשאות user

### בדיקת תרחישים נוספים

- [ ] הוסף משתמש עם **סיסמה מותאמת אישית**
- [ ] ודא שהסיסמה המותאמת עובדת
- [ ] הוסף משתמש עם **תמונת פרופיל**
- [ ] ודא שהתמונה מוצגת
- [ ] נסה להוסיף משתמש עם **אימייל קיים**
- [ ] ודא שמקבל שגיאה: "משתמש עם אימייל זה כבר קיים"

---

## שלב 4: ניקוי (אופציונלי)

### מחיקת משתמשי בדיקה

- [ ] התחבר כמנהל
- [ ] פתח "ניהול משתמשים"
- [ ] מחק את משתמש הבדיקה
- [ ] או השאר אותו למשתמשים אמיתיים

---

## שלב 5: פריסה (Production)

### הכנה לפריסה

- [ ] ודא שכל הבדיקות עברו
- [ ] קרא את הערות האבטחה
- [ ] שקול הצפנת סיסמאות לפני ייצור
- [ ] הכן תיעוד למשתמשים

### פריסה

- [ ] העלה את הקוד ל-Git:
  ```bash
  git add .
  git commit -m "עדכון מערכת ניהול משתמשים"
  git push
  ```
- [ ] פרוס ל-Vercel/Netlify או השרת שלך
- [ ] ודא שהסביבה של production מוגדרת:
  - [ ] `NEXT_PUBLIC_SUPABASE_URL`
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### בדיקה ב-Production

- [ ] היכנס ל-production
- [ ] נסה להוסיף משתמש
- [ ] ודא שהכל עובד כמו ב-development

---

## שלב 6: הדרכת צוות

### מנהלי מערכת

- [ ] הדרך מנהלים על התהליך החדש
- [ ] הסבר שהם צריכים להעתיק את הפרטים
- [ ] הראה איך להעביר פרטים למשתמשים חדשים

### משתמשים

- [ ] הכן הודעת ברוכים הבאים לשליחה
- [ ] דוגמה:
  ```
  היי [שם],
  
  נוצר עבורך חשבון במערכת ניהול המשימות!
  
  פרטי כניסה:
  🔗 כתובת: https://your-app.com
  📧 אימייל: [email]
  🔑 סיסמה: [password]
  
  תוכל/י לשנות את הסיסמה לאחר הכניסה הראשונה.
  
  בהצלחה!
  ```

---

## נספחים

### מדריכים

- [ ] קרא `README_USER_MANAGEMENT.md` - סקירה מהירה
- [ ] קרא `QUICK_USER_GUIDE.md` - מדריך למנהלים
- [ ] קרא `SUMMARY_HE.md` - סיכום מלא
- [ ] קרא `USER_MANAGEMENT_SETUP.md` - הגדרה מפורטת

### פתרון בעיות

אם משהו לא עובד:

1. [ ] הרץ `./test-user-management.sh`
2. [ ] בדוק Console בדפדפן (F12)
3. [ ] בדוק Supabase Dashboard → Logs
4. [ ] קרא את `USER_MANAGEMENT_SETUP.md` → "בעיות נפוצות"

---

## ✅ סיימתי!

אם סימנת את כל הפריטים - **מזל טוב!** 🎉

המערכת שלך מוכנה לשימוש עם מערכת ניהול משתמשים חדשה ומשופרת.

**תאריך השלמה:** ___________

**חתימה:** ___________
